"use strict";function urlify(e){var t=/(https?:\/\/[^\s]+)/g;return e.replace(t,'<a href="$1" target="_blank">$1</a>')}function renderDocuments(e,t){_.each(t.objects,function(t){var n=t.document_file;t.document_file=n.split("/")[4];var r=documentTemplate(t);e.find(".post-photos-container").append(r)})}function renderNews(e,t){$(e).find(".css-posts-content").empty(),_.each(t.objects,function(t){var n=newsTemplate(t),r=$(document.createElement("div"));r.html(n),$(e).find(".news").append(r)}),$(".inline").colorbox({inline:!0,width:"80%"})}function renderPhotos(e,t){_.each(t.objects,function(t){var n=photoTemplate(t);e.find(".post-photos-container").append(n)})}function renderVideos(e,t){_.each(t,function(t){var n=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/,r=t.url.match(n);if(r&&r[7].length===11){var i=$('<div class="video-thumbnail"><iframe width="560" height="315" src="//www.youtube.com/embed/'+r[7]+'" frameborder="0" allowfullscreen></iframe></div>');e.find(".post-videos-container").append(i)}else{var s=$("<a href="+t.url+">"+t.url+"</a>");e.find(".post-videos-container").append(s)}})}function renderPublicPhotos(e,t){$(e).find(".css-pub-container").empty(),_.each(t.objects,function(t){var n=pubPhotoTemplate(t),r=new $.Deferred;r.done(function(t){$(e).find(".content-pub-photo").append(t)}),r.resolve(n),r.done(function(){var e=$(".content-pub-photo > .item");e.first().addClass("active")})})}function renderPosts(e,t){_.each(t.objects,function(t){var n=urlify(t.description);t.description=n;var r=postTemplate(t),i=$(document.createElement("div"));i.html(r),$(e).find(".css-posts-content").append(i),t.getDocuments(function(e){renderDocuments(i,e)}),t.getPhotos(function(e){renderPhotos(i,e)}),t.videos!==""&&renderVideos(i,t.getVideos())}),$(function(){t.nextUrl?$(e).find("a.css-posts-next-page").show():$(e).find("a.css-posts-next-page").hide(),t.prevUrl?$(e).find("a.css-posts-prev-page").show():$(e).find("a.css-posts-prev-page").hide(),$("a.css-posts-next-page").on("click",function(n){n.preventDefault(),t.getNextPage(function(t){renderPosts(e,t)})}),$("a.css-posts-prev-page").on("click",function(n){n.preventDefault(),t.getPreviousPage(function(t){renderPosts(e,t)})})})}var documentTemplate=_.template($("#document-template").html()),postTemplate=_.template($("#post-template").html()),photoTemplate=_.template($("#photo-template").html()),newsTemplate=_.template($("#news-template").html()),pubPhotoTemplate=_.template($("#pub-photo-template").html());